

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Python API &mdash; sphere 1.00-alpha documentation</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/breathe.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '1.00-alpha',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="sphere 1.00-alpha documentation" href="index.html" />
    <link rel="prev" title="Fluid simulation and particle-fluid interaction" href="cfd.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="cfd.html" title="Fluid simulation and particle-fluid interaction"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">sphere 1.00-alpha documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="python-api">
<h1>Python API<a class="headerlink" href="#python-api" title="Permalink to this headline">¶</a></h1>
<p>The Python module <tt class="docutils literal"><span class="pre">sphere</span></tt> is intended as the main interface to the <tt class="docutils literal"><span class="pre">sphere</span></tt>
application. It is recommended to use this module for simulation setup,
simulation execution, and analysis of the simulation output data.</p>
<p>In order to use the API, the file <tt class="docutils literal"><span class="pre">sphere.py</span></tt> must be placed in the same
directory as the Python files.</p>
<div class="section" id="sample-usage">
<h2>Sample usage<a class="headerlink" href="#sample-usage" title="Permalink to this headline">¶</a></h2>
<p>Below is a simple, annotated example of how to setup, execute, and post-process
a <tt class="docutils literal"><span class="pre">sphere</span></tt> simulation.  The example is also found in the <tt class="docutils literal"><span class="pre">python/</span></tt> folder as
<tt class="docutils literal"><span class="pre">collision.py</span></tt>.</p>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62</pre></div></td><td class="code"><div class="highlight"><pre><span class="c">#!/usr/bin/env python</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Example of two particles colliding.</span>
<span class="sd">Place script in sphere/python/ folder, and invoke with `python collision.py`</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="c"># Import the sphere module for setting up, running, and analyzing the</span>
<span class="c"># experiment. We also need the numpy module when setting arrays in the sphere</span>
<span class="c"># object.</span>
<span class="kn">import</span> <span class="nn">sphere</span>
<span class="kn">import</span> <span class="nn">numpy</span>


<span class="c">### SIMULATION SETUP</span>

<span class="c"># Create a sphere object with two preallocated particles and a simulation ID</span>
<span class="n">SB</span> <span class="o">=</span> <span class="n">sphere</span><span class="o">.</span><span class="n">Spherebin</span><span class="p">(</span><span class="n">np</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span> <span class="n">sid</span> <span class="o">=</span> <span class="s">&#39;collision&#39;</span><span class="p">)</span>

<span class="n">SB</span><span class="o">.</span><span class="n">radius</span><span class="p">[:]</span> <span class="o">=</span> <span class="mf">0.3</span> <span class="c"># set radii to 0.3 m</span>

<span class="c"># Define the positions of the two particles</span>
<span class="n">SB</span><span class="o">.</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">10.0</span><span class="p">,</span> <span class="mf">5.0</span><span class="p">,</span> <span class="mf">5.0</span><span class="p">])</span>   <span class="c"># particle 1 (idx 0)</span>
<span class="n">SB</span><span class="o">.</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">11.0</span><span class="p">,</span> <span class="mf">5.0</span><span class="p">,</span> <span class="mf">5.0</span><span class="p">])</span>   <span class="c"># particle 2 (idx 1)</span>

<span class="c"># The default velocity is [0,0,0]. Slam particle 1 into particle 2 by defining</span>
<span class="c"># a positive x velocity for particle 1.</span>
<span class="n">SB</span><span class="o">.</span><span class="n">vel</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mf">1.0</span>

<span class="c"># Set the world limits and the particle sorting grid. The particles need to stay</span>
<span class="c"># within the world limits for the entire simulation, otherwise it will stop!</span>
<span class="n">SB</span><span class="o">.</span><span class="n">initGridAndWorldsize</span><span class="p">(</span><span class="n">margin</span> <span class="o">=</span> <span class="mf">5.0</span><span class="p">)</span>

<span class="c"># Define the temporal parameters, e.g. the total time (total) and the file</span>
<span class="c"># output interval (file_dt), both in seconds</span>
<span class="n">SB</span><span class="o">.</span><span class="n">initTemporal</span><span class="p">(</span><span class="n">total</span> <span class="o">=</span> <span class="mf">2.0</span><span class="p">,</span> <span class="n">file_dt</span> <span class="o">=</span> <span class="mf">0.1</span><span class="p">)</span>

<span class="c"># Save the simulation as a input file for sphere</span>
<span class="n">SB</span><span class="o">.</span><span class="n">writebin</span><span class="p">()</span>

<span class="c"># Using a &#39;dry&#39; run, the sphere main program will display important parameters.</span>
<span class="c"># sphere will end after displaying these values.</span>
<span class="n">SB</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">dry</span> <span class="o">=</span> <span class="bp">True</span><span class="p">)</span>


<span class="c">### RUNNING THE SIMULATION</span>

<span class="c"># Start the simulation on the GPU from the sphere program</span>
<span class="n">SB</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>


<span class="c">### ANALYSIS OF SIMULATION RESULTS</span>

<span class="c"># Plot the system energy through time, image saved as collision-energy.png</span>
<span class="n">sphere</span><span class="o">.</span><span class="n">visualize</span><span class="p">(</span><span class="n">SB</span><span class="o">.</span><span class="n">sid</span><span class="p">,</span> <span class="n">method</span> <span class="o">=</span> <span class="s">&#39;energy&#39;</span><span class="p">)</span>

<span class="c"># Render the particles using the built-in raytracer</span>
<span class="n">SB</span><span class="o">.</span><span class="n">render</span><span class="p">()</span>

<span class="c"># Alternative visualization using ParaView. See the documentation of</span>
<span class="c"># ``Spherebin.writeVTKall()`` for more information about displaying the</span>
<span class="c"># particles in ParaView.</span>
<span class="n">SB</span><span class="o">.</span><span class="n">writeVTKall</span><span class="p">()</span>
</pre></div>
</td></tr></table></div>
<p>The full documentation of the <tt class="docutils literal"><span class="pre">sphere</span></tt> Python API can be found below.</p>
</div>
<div class="section" id="module-sphere">
<span id="the-sphere-module"></span><h2>The <tt class="docutils literal"><span class="pre">sphere</span></tt> module<a class="headerlink" href="#module-sphere" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="sphere.Spherebin">
<em class="property">class </em><tt class="descclassname">sphere.</tt><tt class="descname">Spherebin</tt><big>(</big><em>sid='unnamed'</em>, <em>np=0</em>, <em>nd=3</em>, <em>nw=0</em>, <em>fluid=False</em><big>)</big><a class="headerlink" href="#sphere.Spherebin" title="Permalink to this definition">¶</a></dt>
<dd><p>Class containing all <tt class="docutils literal"><span class="pre">sphere</span></tt> data.</p>
<p>Contains functions for reading and writing binaries, as well as simulation
setup and data analysis. Most arrays are initialized to default values.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>np</strong> (<em>int</em>) &#8211; The number of particles to allocate memory for (default = 1)</li>
<li><strong>nd</strong> (<em>int</em>) &#8211; The number of spatial dimensions (default = 3). Note that 2D and
1D simulations currently are not possible.</li>
<li><strong>nw</strong> (<em>int</em>) &#8211; The number of dynamic walls (default = 1)</li>
<li><strong>sid</strong> (<em>str</em>) &#8211; The simulation id (default = &#8216;unnamed&#8217;). The simulation files
will be written with this base name.</li>
<li><strong>fluid</strong> (<em>bool</em>) &#8211; Setup fluid simulation (default = False)</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="sphere.Spherebin.addParticle">
<tt class="descname">addParticle</tt><big>(</big><em>x</em>, <em>radius</em>, <em>xysum=array([ 0.</em>, <em>0.])</em>, <em>vel=array([ 0.</em>, <em>0.</em>, <em>0.])</em>, <em>fixvel=array([ 0.])</em>, <em>force=array([ 0.</em>, <em>0.</em>, <em>0.])</em>, <em>angpos=array([ 0.</em>, <em>0.</em>, <em>0.])</em>, <em>angvel=array([ 0.</em>, <em>0.</em>, <em>0.])</em>, <em>torque=array([ 0.</em>, <em>0.</em>, <em>0.])</em>, <em>es_dot=array([ 0.])</em>, <em>es=array([ 0.])</em>, <em>ev_dot=array([ 0.])</em>, <em>ev=array([ 0.])</em>, <em>p=array([ 0.])</em><big>)</big><a class="headerlink" href="#sphere.Spherebin.addParticle" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a single particle to the simulation object. The only required
parameters are the position (x) and the radius (radius).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>x</strong> (<em>numpy.array</em>) &#8211; A vector pointing to the particle center coordinate.</li>
<li><strong>radius</strong> (<em>float</em>) &#8211; The particle radius</li>
<li><strong>vel</strong> (<em>numpy.array</em>) &#8211; The particle linear velocity (default = [0,0,0])</li>
<li><strong>fixvel</strong> (<em>float</em>) &#8211; Fix horizontal linear velocity (0: No, 1: Yes, default=0)</li>
<li><strong>angpos</strong> (<em>numpy.array</em>) &#8211; The particle angular position (default = [0,0,0])</li>
<li><strong>angvel</strong> (<em>numpy.array</em>) &#8211; The particle angular velocity (default = [0,0,0])</li>
<li><strong>torque</strong> (<em>numpy.array</em>) &#8211; The particle torque (default = [0,0,0])</li>
<li><strong>es_dot</strong> (<em>float</em>) &#8211; The particle shear energy loss rate (default = 0)</li>
<li><strong>es</strong> (<em>float</em>) &#8211; The particle shear energy loss (default = 0)</li>
<li><strong>ev_dot</strong> (<em>float</em>) &#8211; The particle viscous energy rate loss (default = 0)</li>
<li><strong>ev</strong> (<em>float</em>) &#8211; The particle viscous energy loss (default = 0)</li>
<li><strong>p</strong> (<em>float</em>) &#8211; The particle pressure (default = 0)</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="sphere.Spherebin.adjustUpperWall">
<tt class="descname">adjustUpperWall</tt><big>(</big><em>z_adjust=1.1</em><big>)</big><a class="headerlink" href="#sphere.Spherebin.adjustUpperWall" title="Permalink to this definition">¶</a></dt>
<dd><p>Included for legacy purposes, calls adjustWall with idx=0</p>
</dd></dl>

<dl class="method">
<dt id="sphere.Spherebin.adjustWall">
<tt class="descname">adjustWall</tt><big>(</big><em>idx</em>, <em>adjust=1.1</em><big>)</big><a class="headerlink" href="#sphere.Spherebin.adjustWall" title="Permalink to this definition">¶</a></dt>
<dd><p>Adjust grid and dynamic wall to max. particle position</p>
</dd></dl>

<dl class="method">
<dt id="sphere.Spherebin.bond">
<tt class="descname">bond</tt><big>(</big><em>i</em>, <em>j</em><big>)</big><a class="headerlink" href="#sphere.Spherebin.bond" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a bond between particles i and j</p>
</dd></dl>

<dl class="method">
<dt id="sphere.Spherebin.bondsRose">
<tt class="descname">bondsRose</tt><big>(</big><em>imgformat='pdf'</em><big>)</big><a class="headerlink" href="#sphere.Spherebin.bondsRose" title="Permalink to this definition">¶</a></dt>
<dd><p>Visualize strike- and dip angles of the bond pairs in a rose plot.</p>
</dd></dl>

<dl class="method">
<dt id="sphere.Spherebin.bulkPorosity">
<tt class="descname">bulkPorosity</tt><big>(</big><big>)</big><a class="headerlink" href="#sphere.Spherebin.bulkPorosity" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate and return the bulk porosity</p>
</dd></dl>

<dl class="method">
<dt id="sphere.Spherebin.consolidate">
<tt class="descname">consolidate</tt><big>(</big><em>deviatoric_stress=10000.0</em>, <em>periodic=1</em><big>)</big><a class="headerlink" href="#sphere.Spherebin.consolidate" title="Permalink to this definition">¶</a></dt>
<dd><p>Setup consolidation experiment. Specify the upper wall
deviatoric stress in Pascal, default value is 10 kPa.</p>
</dd></dl>

<dl class="method">
<dt id="sphere.Spherebin.createBondPair">
<tt class="descname">createBondPair</tt><big>(</big><em>i</em>, <em>j</em>, <em>spacing=-0.1</em><big>)</big><a class="headerlink" href="#sphere.Spherebin.createBondPair" title="Permalink to this definition">¶</a></dt>
<dd><p>Bond particles i and j. Particle j is moved adjacent to particle i,
and oriented randomly.
&#64;param spacing (float) The inter-particle distance prescribed. Positive
values result in a inter-particle distance, negative equal an overlap.
The value is relative to the sum of the two radii.</p>
</dd></dl>

<dl class="method">
<dt id="sphere.Spherebin.currentDevs">
<tt class="descname">currentDevs</tt><big>(</big><big>)</big><a class="headerlink" href="#sphere.Spherebin.currentDevs" title="Permalink to this definition">¶</a></dt>
<dd><p>Return current magnitude of the deviatoric normal stress</p>
</dd></dl>

<dl class="method">
<dt id="sphere.Spherebin.defaultParams">
<tt class="descname">defaultParams</tt><big>(</big><em>mu_s=0.4</em>, <em>mu_d=0.4</em>, <em>mu_r=0.0</em>, <em>rho=2600</em>, <em>k_n=1160000000.0</em>, <em>k_t=1160000000.0</em>, <em>k_r=0</em>, <em>gamma_n=0</em>, <em>gamma_t=0</em>, <em>gamma_r=0</em>, <em>gamma_wn=10000.0</em>, <em>gamma_wt=10000.0</em>, <em>capillaryCohesion=0</em><big>)</big><a class="headerlink" href="#sphere.Spherebin.defaultParams" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize particle parameters to default values.
Radii must be set prior to calling this function.</p>
</dd></dl>

<dl class="method">
<dt id="sphere.Spherebin.defineWorldBoundaries">
<tt class="descname">defineWorldBoundaries</tt><big>(</big><em>L, origo=[0.0, 0.0, 0.0]</em><big>)</big><a class="headerlink" href="#sphere.Spherebin.defineWorldBoundaries" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the boundaries of the world. Particles will only be able to interact
within this domain. With dynamic walls, allow space for expansions.
<em>Important</em>: The particle radii have to be set beforehand. The world
edges act as static walls.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>L</strong> (<em>numpy.array</em>) &#8211; The upper boundary of the domain [m]</li>
<li><strong>origo</strong> (<em>numpy.array</em>) &#8211; The lower boundary of the domain [m]. Negative values
won&#8217;t work. Default = [0.0, 0.0, 0.0].</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="sphere.Spherebin.disableFluidPressureModulation">
<tt class="descname">disableFluidPressureModulation</tt><big>(</big><big>)</big><a class="headerlink" href="#sphere.Spherebin.disableFluidPressureModulation" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the parameters for the sine wave modulating the fluid pressures
at the top boundary to zero.</p>
<p>See also: <a class="reference internal" href="#sphere.Spherebin.setFluidPressureModulation" title="sphere.Spherebin.setFluidPressureModulation"><tt class="xref py py-func docutils literal"><span class="pre">setFluidPressureModulation()</span></tt></a></p>
</dd></dl>

<dl class="method">
<dt id="sphere.Spherebin.energy">
<tt class="descname">energy</tt><big>(</big><em>method</em><big>)</big><a class="headerlink" href="#sphere.Spherebin.energy" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the sum of the energy components of all particles.</p>
</dd></dl>

<dl class="method">
<dt id="sphere.Spherebin.forcechains">
<tt class="descname">forcechains</tt><big>(</big><em>lc=200.0</em>, <em>uc=650.0</em>, <em>outformat='png'</em>, <em>disp='2d'</em><big>)</big><a class="headerlink" href="#sphere.Spherebin.forcechains" title="Permalink to this definition">¶</a></dt>
<dd><p>Visualizes the force chains in the system from the magnitude of the
normal contact forces, and produces an image of them.
&#64;param lc: Lower cutoff of contact forces. Contacts below are not
visualized (float)
&#64;param uc: Upper cutoff of contact forces. Contacts above are
visualized with this value (float)
&#64;param outformat: Format of output image. Possible values are
&#8216;interactive&#8217;, &#8216;png&#8217;, &#8216;epslatex&#8217;, &#8216;epslatex-color&#8217;
&#64;param disp: Display forcechains in &#8216;2d&#8217; or &#8216;3d&#8217;
Warning: Will segfault if no contacts are found.</p>
</dd></dl>

<dl class="method">
<dt id="sphere.Spherebin.forcechainsRose">
<tt class="descname">forcechainsRose</tt><big>(</big><em>lower_limit=0.25</em><big>)</big><a class="headerlink" href="#sphere.Spherebin.forcechainsRose" title="Permalink to this definition">¶</a></dt>
<dd><p>Visualize strike- and dip angles of the strongest force chains in a
rose plot.</p>
</dd></dl>

<dl class="method">
<dt id="sphere.Spherebin.generateBimodalRadii">
<tt class="descname">generateBimodalRadii</tt><big>(</big><em>r_small=0.005</em>, <em>r_large=0.05</em>, <em>ratio=0.2</em>, <em>verbose=True</em><big>)</big><a class="headerlink" href="#sphere.Spherebin.generateBimodalRadii" title="Permalink to this definition">¶</a></dt>
<dd><p>Draw random radii from two distinct sizes.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>r_small</strong> (<em>float</em>) &#8211; Radii of small population [m], in ]0;r_large[</li>
<li><strong>r_large</strong> (<em>float</em>) &#8211; Radii of large population [m], in ]r_small;inf[</li>
<li><strong>ratio</strong> (<em>float</em>) &#8211; Approximate volumetric ratio between the two
populations (large/small).</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>See also: <a class="reference internal" href="#sphere.Spherebin.generateRadii" title="sphere.Spherebin.generateRadii"><tt class="xref py py-func docutils literal"><span class="pre">generateRadii()</span></tt></a>.</p>
</dd></dl>

<dl class="method">
<dt id="sphere.Spherebin.generateRadii">
<tt class="descname">generateRadii</tt><big>(</big><em>psd='logn'</em>, <em>radius_mean=0.00044</em>, <em>radius_variance=8.8e-09</em>, <em>histogram=True</em><big>)</big><a class="headerlink" href="#sphere.Spherebin.generateRadii" title="Permalink to this definition">¶</a></dt>
<dd><p>Draw random particle radii from a selected probability distribution.
The larger the variance of radii is, the slower the computations will
run. The reason is two-fold: The smallest particle dictates the time
step length, where smaller particles cause shorter time steps. At the
same time, the largest particle determines the sorting cell size, where
larger particles cause larger cells. Larger cells are likely to contain
more particles, causing more contact checks.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>psd</strong> (<em>str</em>) &#8211; The particle side distribution. One possible value is
<tt class="docutils literal"><span class="pre">logn</span></tt>, which is a log-normal probability distribution, suitable
for approximating well-sorted, coarse sediments. The other possible
value is <tt class="docutils literal"><span class="pre">uni</span></tt>, which is a uniform distribution from
<tt class="docutils literal"><span class="pre">radius_mean-radius_variance</span></tt> to <tt class="docutils literal"><span class="pre">radius_mean+radius_variance</span></tt>.</li>
<li><strong>radius_mean</strong> (<em>float</em>) &#8211; The mean radius [m] (default = 440e-6 m)</li>
<li><strong>radius_variance</strong> (<em>float</em>) &#8211; The variance in the probability distribution
[m].</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>See also: <a class="reference internal" href="#sphere.Spherebin.generateBimodalRadii" title="sphere.Spherebin.generateBimodalRadii"><tt class="xref py py-func docutils literal"><span class="pre">generateBimodalRadii()</span></tt></a>.</p>
</dd></dl>

<dl class="method">
<dt id="sphere.Spherebin.initFluid">
<tt class="descname">initFluid</tt><big>(</big><em>mu=0.00089</em><big>)</big><a class="headerlink" href="#sphere.Spherebin.initFluid" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize the fluid arrays and the fluid viscosity</p>
</dd></dl>

<dl class="method">
<dt id="sphere.Spherebin.initGrid">
<tt class="descname">initGrid</tt><big>(</big><big>)</big><a class="headerlink" href="#sphere.Spherebin.initGrid" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize grid suitable for the particle positions set previously.
The margin parameter adjusts the distance (in no. of max. radii)
from the particle boundaries.</p>
</dd></dl>

<dl class="method">
<dt id="sphere.Spherebin.initGridAndWorldsize">
<tt class="descname">initGridAndWorldsize</tt><big>(</big><em>margin=2.0</em>, <em>periodic=1</em>, <em>contactmodel=2</em><big>)</big><a class="headerlink" href="#sphere.Spherebin.initGridAndWorldsize" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize grid suitable for the particle positions set previously.
The margin parameter adjusts the distance (in no. of max. radii)
from the particle boundaries.</p>
</dd></dl>

<dl class="method">
<dt id="sphere.Spherebin.initGridPos">
<tt class="descname">initGridPos</tt><big>(</big><em>gridnum=array([12</em>, <em>12</em>, <em>36])</em>, <em>periodic=1</em>, <em>contactmodel=2</em><big>)</big><a class="headerlink" href="#sphere.Spherebin.initGridPos" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize particle positions in loose, cubic configuration.
Radii must be set beforehand.
xynum is the number of rows in both x- and y- directions.</p>
</dd></dl>

<dl class="method">
<dt id="sphere.Spherebin.initRandomGridPos">
<tt class="descname">initRandomGridPos</tt><big>(</big><em>gridnum=array([12</em>, <em>12</em>, <em>32])</em>, <em>periodic=1</em>, <em>contactmodel=2</em><big>)</big><a class="headerlink" href="#sphere.Spherebin.initRandomGridPos" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize particle positions in loose, cubic configuration.
Radii must be set beforehand.
xynum is the number of rows in both x- and y- directions.</p>
</dd></dl>

<dl class="method">
<dt id="sphere.Spherebin.initRandomPos">
<tt class="descname">initRandomPos</tt><big>(</big><em>gridnum=array([12</em>, <em>12</em>, <em>36])</em>, <em>periodic=1</em>, <em>contactmodel=2</em><big>)</big><a class="headerlink" href="#sphere.Spherebin.initRandomPos" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize particle positions in completely random configuration. Radii
<em>must</em> be set beforehand. If the x and y boundaries are set as periodic,
the particle centers will be placed all the way to the edge. On regular,
non-periodic boundaries, the particles are restrained at the edges to
make space for their radii within the bounding box.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>gridnum</strong> (<em>numpy.array</em>) &#8211; The number of sorting cells in each spatial direction
(default = [12, 12, 36])</li>
<li><strong>periodic</strong> (<em>int</em>) &#8211; Set if the x and y boundaries are periodic (no = 0, yes 
= 1, default = 1)</li>
<li><strong>contactmodel</strong> (<em>int</em>) &#8211; The type of tangential contact model to use
(visco-frictional = 1, elasto-visco-frictional = 2, default = 2)</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="sphere.Spherebin.initTemporal">
<tt class="descname">initTemporal</tt><big>(</big><em>total</em>, <em>current=0.0</em>, <em>file_dt=0.05</em>, <em>step_count=0</em><big>)</big><a class="headerlink" href="#sphere.Spherebin.initTemporal" title="Permalink to this definition">¶</a></dt>
<dd><p>Set temporal parameters for the simulation.
Particle radii, physical parameters, and the optional fluid grid
need to be set prior to these.</p>
</dd></dl>

<dl class="method">
<dt id="sphere.Spherebin.plotConvergence">
<tt class="descname">plotConvergence</tt><big>(</big><em>format='png'</em><big>)</big><a class="headerlink" href="#sphere.Spherebin.plotConvergence" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot the convergence evolution in the CFD solver. The plot is saved 
in the output folder with the file name &lt;simulation ID&gt;-conv.&lt;format&gt;.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>format</strong> (<em>str</em>) &#8211; The plot file type (default = &#8216;png&#8217;)</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="sphere.Spherebin.plotFluidDiffAdvPresZ">
<tt class="descname">plotFluidDiffAdvPresZ</tt><big>(</big><big>)</big><a class="headerlink" href="#sphere.Spherebin.plotFluidDiffAdvPresZ" title="Permalink to this definition">¶</a></dt>
<dd><p>Compare contributions to the velocity from diffusion and advection
at top boundary, assuming the flow is 1D along the z-axis, phi = 1, and
dphi = 0. This solution is analog to the predicted velocity and not
constrained by the conservation of mass.</p>
</dd></dl>

<dl class="method">
<dt id="sphere.Spherebin.plotFluidPorositiesY">
<tt class="descname">plotFluidPorositiesY</tt><big>(</big><em>iteration=-1</em>, <em>y=-1</em>, <em>outformat='png'</em><big>)</big><a class="headerlink" href="#sphere.Spherebin.plotFluidPorositiesY" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot the porosity values from the simulation. If iteration is -1
(default value), the last output file will be shown. If the y value is
-1, the center x,z plane will be rendered</p>
</dd></dl>

<dl class="method">
<dt id="sphere.Spherebin.plotPrescribedFluidPressures">
<tt class="descname">plotPrescribedFluidPressures</tt><big>(</big><em>format='png'</em><big>)</big><a class="headerlink" href="#sphere.Spherebin.plotPrescribedFluidPressures" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot the prescribed fluid pressures through time that may be
modulated through the class parameters p_mod_A, p_mod_f, and p_mod_phi.</p>
</dd></dl>

<dl class="method">
<dt id="sphere.Spherebin.porosities">
<tt class="descname">porosities</tt><big>(</big><em>outformat='pdf'</em>, <em>zslices=16</em><big>)</big><a class="headerlink" href="#sphere.Spherebin.porosities" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot porosities with depth</p>
</dd></dl>

<dl class="method">
<dt id="sphere.Spherebin.porosity">
<tt class="descname">porosity</tt><big>(</big><em>slices=10</em>, <em>verbose=False</em><big>)</big><a class="headerlink" href="#sphere.Spherebin.porosity" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the porosity as a function of depth, by averaging values
in horizontal slabs.
Returns porosity values and depth</p>
</dd></dl>

<dl class="method">
<dt id="sphere.Spherebin.random2bonds">
<tt class="descname">random2bonds</tt><big>(</big><em>ratio=0.3</em>, <em>spacing=-0.1</em><big>)</big><a class="headerlink" href="#sphere.Spherebin.random2bonds" title="Permalink to this definition">¶</a></dt>
<dd><p>Bond an amount of particles in two-particle clusters &#64;param ratio:
The amount of particles to bond, values in ]0.0;1.0] (float)
&#64;param spacing: The distance relative to the sum of radii between bonded
particles, neg. values denote an overlap. Values in ]0.0,inf[ (float).
The particles should be initialized beforehand.
Note: The actual number of bonds is likely to be somewhat smaller than
specified, due to the random selection algorithm.</p>
</dd></dl>

<dl class="method">
<dt id="sphere.Spherebin.readbin">
<tt class="descname">readbin</tt><big>(</big><em>targetbin</em>, <em>verbose=True</em>, <em>bonds=True</em>, <em>devsmod=True</em>, <em>esysparticle=False</em><big>)</big><a class="headerlink" href="#sphere.Spherebin.readbin" title="Permalink to this definition">¶</a></dt>
<dd><p>Reads a target <tt class="docutils literal"><span class="pre">sphere</span></tt> binary file.</p>
<p>See also <a class="reference internal" href="#sphere.Spherebin.writebin" title="sphere.Spherebin.writebin"><tt class="xref py py-func docutils literal"><span class="pre">writebin()</span></tt></a>, <a class="reference internal" href="#sphere.Spherebin.readfirst" title="sphere.Spherebin.readfirst"><tt class="xref py py-func docutils literal"><span class="pre">readfirst()</span></tt></a>, <a class="reference internal" href="#sphere.Spherebin.readlast" title="sphere.Spherebin.readlast"><tt class="xref py py-func docutils literal"><span class="pre">readlast()</span></tt></a>,
<a class="reference internal" href="#sphere.Spherebin.readsecond" title="sphere.Spherebin.readsecond"><tt class="xref py py-func docutils literal"><span class="pre">readsecond()</span></tt></a>, and <a class="reference internal" href="#sphere.Spherebin.readstep" title="sphere.Spherebin.readstep"><tt class="xref py py-func docutils literal"><span class="pre">readstep()</span></tt></a>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>targetbin</strong> (<em>str</em>) &#8211; The path to the binary <tt class="docutils literal"><span class="pre">sphere</span></tt> file</li>
<li><strong>verbose</strong> (<em>bool</em>) &#8211; Show diagnostic information (default = True)</li>
<li><strong>bonds</strong> (<em>bool</em>) &#8211; The input file contains bond information (default = True).
This parameter should be true for all recent <tt class="docutils literal"><span class="pre">sphere</span></tt> versions.</li>
<li><strong>devsmod</strong> (<em>bool</em>) &#8211; The input file contains information about modulating
stresses at the top wall (default = True). This parameter should be
true for all recent <tt class="docutils literal"><span class="pre">sphere</span></tt> versions.</li>
<li><strong>esysparticle</strong> (<em>bool</em>) &#8211; Stop reading the file after reading the kinematics,
which is useful for reading output files from other DEM programs.
(default = False)</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="sphere.Spherebin.readfirst">
<tt class="descname">readfirst</tt><big>(</big><em>verbose=True</em><big>)</big><a class="headerlink" href="#sphere.Spherebin.readfirst" title="Permalink to this definition">¶</a></dt>
<dd><p>Read the first output file from the <tt class="docutils literal"><span class="pre">../output/</span></tt> folder, corresponding
to the object simulation id (<tt class="docutils literal"><span class="pre">self.sid</span></tt>).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>verbose</strong> (<em>bool</em>) &#8211; Display diagnostic information (default = True)</td>
</tr>
</tbody>
</table>
<p>See also <a class="reference internal" href="#sphere.Spherebin.readbin" title="sphere.Spherebin.readbin"><tt class="xref py py-func docutils literal"><span class="pre">readbin()</span></tt></a>, <a class="reference internal" href="#sphere.Spherebin.readlast" title="sphere.Spherebin.readlast"><tt class="xref py py-func docutils literal"><span class="pre">readlast()</span></tt></a>, <a class="reference internal" href="#sphere.Spherebin.readsecond" title="sphere.Spherebin.readsecond"><tt class="xref py py-func docutils literal"><span class="pre">readsecond()</span></tt></a>, and
<a class="reference internal" href="#sphere.Spherebin.readstep" title="sphere.Spherebin.readstep"><tt class="xref py py-func docutils literal"><span class="pre">readstep()</span></tt></a>.</p>
</dd></dl>

<dl class="method">
<dt id="sphere.Spherebin.readlast">
<tt class="descname">readlast</tt><big>(</big><em>verbose=True</em><big>)</big><a class="headerlink" href="#sphere.Spherebin.readlast" title="Permalink to this definition">¶</a></dt>
<dd><p>Read the last output file from the <tt class="docutils literal"><span class="pre">../output/</span></tt> folder, corresponding
to the object simulation id (<tt class="docutils literal"><span class="pre">self.sid</span></tt>).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>verbose</strong> (<em>bool</em>) &#8211; Display diagnostic information (default = True)</td>
</tr>
</tbody>
</table>
<p>See also <a class="reference internal" href="#sphere.Spherebin.readbin" title="sphere.Spherebin.readbin"><tt class="xref py py-func docutils literal"><span class="pre">readbin()</span></tt></a>, <a class="reference internal" href="#sphere.Spherebin.readfirst" title="sphere.Spherebin.readfirst"><tt class="xref py py-func docutils literal"><span class="pre">readfirst()</span></tt></a>, <a class="reference internal" href="#sphere.Spherebin.readsecond" title="sphere.Spherebin.readsecond"><tt class="xref py py-func docutils literal"><span class="pre">readsecond()</span></tt></a>, and
<a class="reference internal" href="#sphere.Spherebin.readstep" title="sphere.Spherebin.readstep"><tt class="xref py py-func docutils literal"><span class="pre">readstep()</span></tt></a>.</p>
</dd></dl>

<dl class="method">
<dt id="sphere.Spherebin.readsecond">
<tt class="descname">readsecond</tt><big>(</big><em>verbose=True</em><big>)</big><a class="headerlink" href="#sphere.Spherebin.readsecond" title="Permalink to this definition">¶</a></dt>
<dd><p>Read the second output file from the <tt class="docutils literal"><span class="pre">../output/</span></tt> folder,
corresponding to the object simulation id (<tt class="docutils literal"><span class="pre">self.sid</span></tt>).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>verbose</strong> (<em>bool</em>) &#8211; Display diagnostic information (default = True)</td>
</tr>
</tbody>
</table>
<p>See also <a class="reference internal" href="#sphere.Spherebin.readbin" title="sphere.Spherebin.readbin"><tt class="xref py py-func docutils literal"><span class="pre">readbin()</span></tt></a>, <a class="reference internal" href="#sphere.Spherebin.readfirst" title="sphere.Spherebin.readfirst"><tt class="xref py py-func docutils literal"><span class="pre">readfirst()</span></tt></a>, <a class="reference internal" href="#sphere.Spherebin.readlast" title="sphere.Spherebin.readlast"><tt class="xref py py-func docutils literal"><span class="pre">readlast()</span></tt></a>,
and <a class="reference internal" href="#sphere.Spherebin.readstep" title="sphere.Spherebin.readstep"><tt class="xref py py-func docutils literal"><span class="pre">readstep()</span></tt></a>.</p>
</dd></dl>

<dl class="method">
<dt id="sphere.Spherebin.readstep">
<tt class="descname">readstep</tt><big>(</big><em>step</em>, <em>verbose=True</em><big>)</big><a class="headerlink" href="#sphere.Spherebin.readstep" title="Permalink to this definition">¶</a></dt>
<dd><p>Read a output file from the <tt class="docutils literal"><span class="pre">../output/</span></tt> folder, corresponding
to the object simulation id (<tt class="docutils literal"><span class="pre">self.sid</span></tt>).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>step</strong> (<em>int</em>) &#8211; The output file number to read, starting from 0.</li>
<li><strong>verbose</strong> (<em>bool</em>) &#8211; Display diagnostic information (default = True)</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>See also <a class="reference internal" href="#sphere.Spherebin.readbin" title="sphere.Spherebin.readbin"><tt class="xref py py-func docutils literal"><span class="pre">readbin()</span></tt></a>, <a class="reference internal" href="#sphere.Spherebin.readfirst" title="sphere.Spherebin.readfirst"><tt class="xref py py-func docutils literal"><span class="pre">readfirst()</span></tt></a>, <a class="reference internal" href="#sphere.Spherebin.readlast" title="sphere.Spherebin.readlast"><tt class="xref py py-func docutils literal"><span class="pre">readlast()</span></tt></a>,
and <a class="reference internal" href="#sphere.Spherebin.readsecond" title="sphere.Spherebin.readsecond"><tt class="xref py py-func docutils literal"><span class="pre">readsecond()</span></tt></a>.</p>
</dd></dl>

<dl class="method">
<dt id="sphere.Spherebin.render">
<tt class="descname">render</tt><big>(</big><em>method='pres'</em>, <em>max_val=1000.0</em>, <em>lower_cutoff=0.0</em>, <em>graphicsformat='png'</em>, <em>verbose=True</em><big>)</big><a class="headerlink" href="#sphere.Spherebin.render" title="Permalink to this definition">¶</a></dt>
<dd><p>Render all output files that belong to the simulation, determined by
sid.</p>
</dd></dl>

<dl class="method">
<dt id="sphere.Spherebin.run">
<tt class="descname">run</tt><big>(</big><em>verbose=True</em>, <em>hideinputfile=False</em>, <em>dry=False</em>, <em>valgrind=False</em>, <em>cudamemcheck=False</em><big>)</big><a class="headerlink" href="#sphere.Spherebin.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Execute <tt class="docutils literal"><span class="pre">sphere</span></tt> with target project</p>
</dd></dl>

<dl class="method">
<dt id="sphere.Spherebin.setFluidPressureModulation">
<tt class="descname">setFluidPressureModulation</tt><big>(</big><em>A</em>, <em>f</em>, <em>phi=0.0</em><big>)</big><a class="headerlink" href="#sphere.Spherebin.setFluidPressureModulation" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the parameters for the sine wave modulating the fluid pressures
at the top boundary. Note that a cos-wave is obtained with phi=pi/2.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>A</strong> (<em>float</em>) &#8211; Fluctuation amplitude [Pa]</li>
<li><strong>f</strong> (<em>float</em>) &#8211; Fluctuation frequency [Hz]</li>
<li><strong>phi</strong> (<em>float</em>) &#8211; Fluctuation phase shift (default=0.0)</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>See also: <a class="reference internal" href="#sphere.Spherebin.disableFluidPressureModulation" title="sphere.Spherebin.disableFluidPressureModulation"><tt class="xref py py-func docutils literal"><span class="pre">disableFluidPressureModulation()</span></tt></a></p>
</dd></dl>

<dl class="method">
<dt id="sphere.Spherebin.shear">
<tt class="descname">shear</tt><big>(</big><em>shear_strain_rate=1</em>, <em>periodic=1</em><big>)</big><a class="headerlink" href="#sphere.Spherebin.shear" title="Permalink to this definition">¶</a></dt>
<dd><p>Setup shear experiment. Specify the upper wall
deviatoric stress in Pascal, default value is 10 kPa.
The shear strain rate is the shear length divided by the
initial height per second.</p>
</dd></dl>

<dl class="method">
<dt id="sphere.Spherebin.sheardisp">
<tt class="descname">sheardisp</tt><big>(</big><em>outformat='pdf'</em>, <em>zslices=32</em><big>)</big><a class="headerlink" href="#sphere.Spherebin.sheardisp" title="Permalink to this definition">¶</a></dt>
<dd><p>Show particle x-displacement vs. the z-pos</p>
</dd></dl>

<dl class="method">
<dt id="sphere.Spherebin.shearstrain">
<tt class="descname">shearstrain</tt><big>(</big><big>)</big><a class="headerlink" href="#sphere.Spherebin.shearstrain" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates and returns the current shear strain (gamma) value of the
experiment.</p>
</dd></dl>

<dl class="method">
<dt id="sphere.Spherebin.shearvel">
<tt class="descname">shearvel</tt><big>(</big><big>)</big><a class="headerlink" href="#sphere.Spherebin.shearvel" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates and returns the shear velocity (gamma_dot) of the
experiment</p>
</dd></dl>

<dl class="method">
<dt id="sphere.Spherebin.status">
<tt class="descname">status</tt><big>(</big><big>)</big><a class="headerlink" href="#sphere.Spherebin.status" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the current simulation status by using the simulation id
(<tt class="docutils literal"><span class="pre">sid</span></tt>) as an identifier.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">The number of the last output file written</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">int</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="sphere.Spherebin.thinsection_x1x3">
<tt class="descname">thinsection_x1x3</tt><big>(</big><em>x2='center'</em>, <em>graphicsformat='png'</em>, <em>cbmax=None</em>, <em>arrowscale=0.01</em>, <em>velarrowscale=1.0</em>, <em>slipscale=1.0</em>, <em>verbose=False</em><big>)</big><a class="headerlink" href="#sphere.Spherebin.thinsection_x1x3" title="Permalink to this definition">¶</a></dt>
<dd><p>Produce a 2D image of particles on a x1,x3 plane, intersecting the
second axis at x2.
Output is saved as &#8216;&lt;sid&gt;-ts-x1x3.txt&#8217; in the current folder.</p>
<p>An upper limit to the pressure color bar range can be set by the
cbmax parameter.</p>
<dl class="docutils">
<dt>The data can be plotted in gnuplot with:</dt>
<dd>gnuplot&gt; set size ratio -1
gnuplot&gt; set palette defined (0 &#8220;blue&#8221;, 0.5 &#8220;gray&#8221;, 1 &#8220;red&#8221;)
gnuplot&gt; plot &#8216;&lt;sid&gt;-ts-x1x3.txt&#8217; with circles palette fs                         transparent solid 0.4 noborder</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="sphere.Spherebin.torqueScript">
<tt class="descname">torqueScript</tt><big>(</big><em>email='adc&#64;geo.au.dk'</em>, <em>email_alerts='ae'</em>, <em>walltime='24:00:00'</em>, <em>queue='qfermi'</em>, <em>cudapath='/com/cuda/4.0.17/cuda'</em>, <em>spheredir='/home/adc/code/sphere'</em>, <em>workdir='/scratch'</em><big>)</big><a class="headerlink" href="#sphere.Spherebin.torqueScript" title="Permalink to this definition">¶</a></dt>
<dd><p>Create job script for the Torque queue manager for the binary</p>
</dd></dl>

<dl class="method">
<dt id="sphere.Spherebin.totalMomentum">
<tt class="descname">totalMomentum</tt><big>(</big><big>)</big><a class="headerlink" href="#sphere.Spherebin.totalMomentum" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the sum of particle momentums.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">The sum of particle momentums (m*v) [N*s]</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">float</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="sphere.Spherebin.triaxial">
<tt class="descname">triaxial</tt><big>(</big><em>wvel=-0.001</em>, <em>deviatoric_stress=10000.0</em><big>)</big><a class="headerlink" href="#sphere.Spherebin.triaxial" title="Permalink to this definition">¶</a></dt>
<dd><p>Setup triaxial experiment. The upper wall is moved at a fixed
velocity in m/s, default values is -0.001 m/s (i.e. downwards).
The side walls are exerting a deviatoric stress</p>
</dd></dl>

<dl class="method">
<dt id="sphere.Spherebin.uniaxialStrainRate">
<tt class="descname">uniaxialStrainRate</tt><big>(</big><em>wvel=-0.001</em>, <em>periodic=1</em><big>)</big><a class="headerlink" href="#sphere.Spherebin.uniaxialStrainRate" title="Permalink to this definition">¶</a></dt>
<dd><p>Setup consolidation experiment. Specify the upper wall
velocity in m/s, default value is -0.001 m/s (i.e. downwards).</p>
</dd></dl>

<dl class="method">
<dt id="sphere.Spherebin.video">
<tt class="descname">video</tt><big>(</big><em>out_folder='./'</em>, <em>video_format='mp4'</em>, <em>graphics_folder='../img_out/'</em>, <em>graphics_format='png'</em>, <em>fps=25</em>, <em>qscale=1</em>, <em>bitrate=1800</em>, <em>verbose=False</em><big>)</big><a class="headerlink" href="#sphere.Spherebin.video" title="Permalink to this definition">¶</a></dt>
<dd><p>Use ffmpeg to combine images to animation. All images should be
rendered beforehand.</p>
</dd></dl>

<dl class="method">
<dt id="sphere.Spherebin.voidRatio">
<tt class="descname">voidRatio</tt><big>(</big><big>)</big><a class="headerlink" href="#sphere.Spherebin.voidRatio" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the current void ratio</p>
</dd></dl>

<dl class="method">
<dt id="sphere.Spherebin.writeFluidVTK">
<tt class="descname">writeFluidVTK</tt><big>(</big><em>folder='../output/'</em>, <em>verbose=True</em><big>)</big><a class="headerlink" href="#sphere.Spherebin.writeFluidVTK" title="Permalink to this definition">¶</a></dt>
<dd><p>Writes a VTK file for the fluid grid to the <tt class="docutils literal"><span class="pre">../output/</span></tt> folder by
default. The file name will be in the format <tt class="docutils literal"><span class="pre">fluid-&lt;self.sid&gt;.vti</span></tt>.
The vti files can be used for visualizing the fluid in ParaView.</p>
<p>The fluid grid is visualized by opening the vti files, and pressing
&#8220;Apply&#8221; to import all fluid field properties. To visualize the scalar
fields, such as the pressure, the porosity, the porosity change or the
velocity magnitude, choose &#8220;Surface&#8221; or &#8220;Surface With Edges&#8221; as the
&#8220;Representation&#8221;. Choose the desired property as the &#8220;Coloring&#8221; field.
It may be desirable to show the color bar by pressing the &#8220;Show&#8221; button,
and &#8220;Rescale&#8221; to fit the color range limits to the current file. The
coordinate system can be displayed by checking the &#8220;Show Axis&#8221; field.
All adjustments by default require the &#8220;Apply&#8221; button to be pressed
before regenerating the view.</p>
<p>The fluid vector fields (e.g. the fluid velocity) can be visualizing by
e.g. arrows. To do this, select the fluid data in the &#8220;Pipeline
Browser&#8221;. Press &#8220;Glyph&#8221; from the &#8220;Common&#8221; toolbar, or go to the
&#8220;Filters&#8221; mennu, and press &#8220;Glyph&#8221; from the &#8220;Common&#8221; list. Make sure
that &#8220;Arrow&#8221; is selected as the &#8220;Glyph type&#8221;, and &#8220;Velocity&#8221; as the
&#8220;Vectors&#8221; value. Adjust the &#8220;Maximum Number of Points&#8221; to be at least as
big as the number of fluid cells in the grid. Press &#8220;Apply&#8221; to visualize
the arrows.</p>
<p>If several data files are generated for the same simulation (e.g. using
the <a class="reference internal" href="#sphere.Spherebin.writeVTKall" title="sphere.Spherebin.writeVTKall"><tt class="xref py py-func docutils literal"><span class="pre">writeVTKall()</span></tt></a> function), it is able to step the
visualization through time by using the ParaView controls.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>folder</strong> (<em>str</em>) &#8211; The folder where to place the output binary file (default
(default = &#8216;../output/&#8217;)</li>
<li><strong>verbose</strong> (<em>bool</em>) &#8211; Show diagnostic information (default = True)</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="sphere.Spherebin.writeVTK">
<tt class="descname">writeVTK</tt><big>(</big><em>folder='../output/'</em>, <em>verbose=True</em><big>)</big><a class="headerlink" href="#sphere.Spherebin.writeVTK" title="Permalink to this definition">¶</a></dt>
<dd><p>Writes a VTK file with particle information to the <tt class="docutils literal"><span class="pre">../output/</span></tt> folder
by default. The file name will be in the format <tt class="docutils literal"><span class="pre">&lt;self.sid&gt;.vtu</span></tt>.
The vtu files can be used to visualize the particles in ParaView.</p>
<p>After opening the vtu files, the particle fields will show up in the
&#8220;Properties&#8221; list. Press &#8220;Apply&#8221; to import all fields into the ParaView
session. The particles are visualized by selecting the imported data in
the &#8220;Pipeline Browser&#8221;. Afterwards, click the &#8220;Glyph&#8221; button in the
&#8220;Common&#8221; toolbar, or go to the &#8220;Filters&#8221; menu, and press &#8220;Glyph&#8221; from
the &#8220;Common&#8221; list. Choose &#8220;Sphere&#8221; as the &#8220;Glyph Type&#8221;, set &#8220;Radius&#8221; to
1.0, choose &#8220;scalar&#8221; as the &#8220;Scale Mode&#8221;. Check the &#8220;Edit&#8221; checkbox, and
set the &#8220;Set Scale Factor&#8221; to 1.0. The field &#8220;Maximum Number of Points&#8221;
may be increased if the number of particles exceed the default value.
Finally press &#8220;Apply&#8221;, and the particles will appear in the main window.</p>
<p>The sphere resolution may be adjusted (&#8220;Theta resolution&#8221;, &#8220;Phi
resolution&#8221;) to increase the quality and the computational requirements
of the rendering. All adjustments by default require the &#8220;Apply&#8221; button
to be pressed before regenerating the view.</p>
<p>If several vtu files are generated for the same simulation (e.g. using
the :func:<tt class="docutils literal"><span class="pre">writeVTKall()</span></tt> function), it is able to step the
visualization through time by using the ParaView controls.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>folder</strong> (<em>str</em>) &#8211; The folder where to place the output binary file (default
(default = &#8216;../output/&#8217;)</li>
<li><strong>verbose</strong> (<em>bool</em>) &#8211; Show diagnostic information (default = True)</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="sphere.Spherebin.writeVTKall">
<tt class="descname">writeVTKall</tt><big>(</big><em>verbose=True</em><big>)</big><a class="headerlink" href="#sphere.Spherebin.writeVTKall" title="Permalink to this definition">¶</a></dt>
<dd><p>Writes a VTK file for each simulation output file with particle
information and the fluid grid to the <tt class="docutils literal"><span class="pre">../output/</span></tt> folder by default.
The file name will be in the format <tt class="docutils literal"><span class="pre">&lt;self.sid&gt;.vtu</span></tt> and
<tt class="docutils literal"><span class="pre">fluid-&lt;self.sid&gt;.vti</span></tt>. The vtu files can be used to visualize the
particles, and the vti files for visualizing the fluid in ParaView.</p>
<p>After opening the vtu files, the particle fields will show up in the
&#8220;Properties&#8221; list. Press &#8220;Apply&#8221; to import all fields into the ParaView
session. The particles are visualized by selecting the imported data in
the &#8220;Pipeline Browser&#8221;. Afterwards, click the &#8220;Glyph&#8221; button in the
&#8220;Common&#8221; toolbar, or go to the &#8220;Filters&#8221; menu, and press &#8220;Glyph&#8221; from
the &#8220;Common&#8221; list. Choose &#8220;Sphere&#8221; as the &#8220;Glyph Type&#8221;, set &#8220;Radius&#8221; to
1.0, choose &#8220;scalar&#8221; as the &#8220;Scale Mode&#8221;. Check the &#8220;Edit&#8221; checkbox, and
set the &#8220;Set Scale Factor&#8221; to 1.0. The field &#8220;Maximum Number of Points&#8221;
may be increased if the number of particles exceed the default value.
Finally press &#8220;Apply&#8221;, and the particles will appear in the main window.</p>
<p>The sphere resolution may be adjusted (&#8220;Theta resolution&#8221;, &#8220;Phi
resolution&#8221;) to increase the quality and the computational requirements
of the rendering.</p>
<p>The fluid grid is visualized by opening the vti files, and pressing
&#8220;Apply&#8221; to import all fluid field properties. To visualize the scalar
fields, such as the pressure, the porosity, the porosity change or the
velocity magnitude, choose &#8220;Surface&#8221; or &#8220;Surface With Edges&#8221; as the
&#8220;Representation&#8221;. Choose the desired property as the &#8220;Coloring&#8221; field.
It may be desirable to show the color bar by pressing the &#8220;Show&#8221; button,
and &#8220;Rescale&#8221; to fit the color range limits to the current file. The
coordinate system can be displayed by checking the &#8220;Show Axis&#8221; field.
All adjustments by default require the &#8220;Apply&#8221; button to be pressed
before regenerating the view.</p>
<p>The fluid vector fields (e.g. the fluid velocity) can be visualizing by
e.g. arrows. To do this, select the fluid data in the &#8220;Pipeline
Browser&#8221;. Press &#8220;Glyph&#8221; from the &#8220;Common&#8221; toolbar, or go to the
&#8220;Filters&#8221; mennu, and press &#8220;Glyph&#8221; from the &#8220;Common&#8221; list. Make sure
that &#8220;Arrow&#8221; is selected as the &#8220;Glyph type&#8221;, and &#8220;Velocity&#8221; as the
&#8220;Vectors&#8221; value. Adjust the &#8220;Maximum Number of Points&#8221; to be at least as
big as the number of fluid cells in the grid. Press &#8220;Apply&#8221; to visualize
the arrows.</p>
<p>If several data files are generated for the same simulation (e.g. using
the <a class="reference internal" href="#sphere.Spherebin.writeVTKall" title="sphere.Spherebin.writeVTKall"><tt class="xref py py-func docutils literal"><span class="pre">writeVTKall()</span></tt></a> function), it is able to step the visualization
through time by using the ParaView controls.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>verbose</strong> (<em>bool</em>) &#8211; Show diagnostic information (default = True)</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="sphere.Spherebin.writebin">
<tt class="descname">writebin</tt><big>(</big><em>folder='../input/'</em>, <em>verbose=True</em><big>)</big><a class="headerlink" href="#sphere.Spherebin.writebin" title="Permalink to this definition">¶</a></dt>
<dd><p>Writes a <tt class="docutils literal"><span class="pre">sphere</span></tt> binary file to the <tt class="docutils literal"><span class="pre">../input/</span></tt> folder by default. The
file name will be in the format <tt class="docutils literal"><span class="pre">&lt;self.sid&gt;.bin</span></tt>.</p>
<p>See also <a class="reference internal" href="#sphere.Spherebin.readbin" title="sphere.Spherebin.readbin"><tt class="xref py py-func docutils literal"><span class="pre">readbin()</span></tt></a>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>folder</strong> (<em>str</em>) &#8211; The folder where to place the output binary file</li>
<li><strong>verbose</strong> (<em>bool</em>) &#8211; Show diagnostic information (default = True)</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="sphere.Spherebin.zeroKinematics">
<tt class="descname">zeroKinematics</tt><big>(</big><big>)</big><a class="headerlink" href="#sphere.Spherebin.zeroKinematics" title="Permalink to this definition">¶</a></dt>
<dd><p>Zero kinematics of particles</p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="sphere.V_sphere">
<tt class="descclassname">sphere.</tt><tt class="descname">V_sphere</tt><big>(</big><em>r</em><big>)</big><a class="headerlink" href="#sphere.V_sphere" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the volume of a sphere with radius r</p>
</dd></dl>

<dl class="function">
<dt id="sphere.cleanup">
<tt class="descclassname">sphere.</tt><tt class="descname">cleanup</tt><big>(</big><em>spherebin</em><big>)</big><a class="headerlink" href="#sphere.cleanup" title="Permalink to this definition">¶</a></dt>
<dd><p>Removes the input/output files and images belonging to the object simulation
ID from the <tt class="docutils literal"><span class="pre">input/</span></tt>, <tt class="docutils literal"><span class="pre">output/</span></tt> and <tt class="docutils literal"><span class="pre">img_out/</span></tt> folders.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>spherebin</strong> (<em>Spherebin</em>) &#8211; A Spherebin object</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="sphere.convert">
<tt class="descclassname">sphere.</tt><tt class="descname">convert</tt><big>(</big><em>graphicsformat='png'</em>, <em>folder='../img_out'</em><big>)</big><a class="headerlink" href="#sphere.convert" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts all PPM images in img_out to graphicsformat, using ImageMagick</p>
</dd></dl>

<dl class="function">
<dt id="sphere.render">
<tt class="descclassname">sphere.</tt><tt class="descname">render</tt><big>(</big><em>binary</em>, <em>method='pres'</em>, <em>max_val=1000.0</em>, <em>lower_cutoff=0.0</em>, <em>graphicsformat='png'</em>, <em>verbose=True</em><big>)</big><a class="headerlink" href="#sphere.render" title="Permalink to this definition">¶</a></dt>
<dd><p>Render target binary using the <tt class="docutils literal"><span class="pre">sphere</span></tt> raytracer.</p>
</dd></dl>

<dl class="function">
<dt id="sphere.run">
<tt class="descclassname">sphere.</tt><tt class="descname">run</tt><big>(</big><em>binary</em>, <em>verbose=True</em>, <em>hideinputfile=False</em><big>)</big><a class="headerlink" href="#sphere.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Execute <tt class="docutils literal"><span class="pre">sphere</span></tt> with target binary as input</p>
</dd></dl>

<dl class="function">
<dt id="sphere.status">
<tt class="descclassname">sphere.</tt><tt class="descname">status</tt><big>(</big><em>project</em><big>)</big><a class="headerlink" href="#sphere.status" title="Permalink to this definition">¶</a></dt>
<dd><p>Check the status.dat file for the target project,
and return the last file numer.</p>
</dd></dl>

<dl class="function">
<dt id="sphere.thinsectionVideo">
<tt class="descclassname">sphere.</tt><tt class="descname">thinsectionVideo</tt><big>(</big><em>project</em>, <em>out_folder='./'</em>, <em>video_format='mp4'</em>, <em>fps=25</em>, <em>qscale=1</em>, <em>bitrate=1800</em>, <em>verbose=False</em><big>)</big><a class="headerlink" href="#sphere.thinsectionVideo" title="Permalink to this definition">¶</a></dt>
<dd><p>Use ffmpeg to combine thin section images to animation.
This function will start off by rendering the images.</p>
</dd></dl>

<dl class="function">
<dt id="sphere.torqueScriptParallel3">
<tt class="descclassname">sphere.</tt><tt class="descname">torqueScriptParallel3</tt><big>(</big><em>obj1</em>, <em>obj2</em>, <em>obj3</em>, <em>email='adc&#64;geo.au.dk'</em>, <em>email_alerts='ae'</em>, <em>walltime='24:00:00'</em>, <em>queue='qfermi'</em>, <em>cudapath='/com/cuda/4.0.17/cuda'</em>, <em>spheredir='/home/adc/code/sphere'</em>, <em>workdir='/scratch'</em><big>)</big><a class="headerlink" href="#sphere.torqueScriptParallel3" title="Permalink to this definition">¶</a></dt>
<dd><p>Create job script for the Torque queue manager for three binaries,
executed in parallel.
Returns the filename of the script</p>
</dd></dl>

<dl class="function">
<dt id="sphere.torqueScriptSerial3">
<tt class="descclassname">sphere.</tt><tt class="descname">torqueScriptSerial3</tt><big>(</big><em>obj1</em>, <em>obj2</em>, <em>obj3</em>, <em>email='adc&#64;geo.au.dk'</em>, <em>email_alerts='ae'</em>, <em>walltime='24:00:00'</em>, <em>queue='qfermi'</em>, <em>cudapath='/com/cuda/4.0.17/cuda'</em>, <em>spheredir='/home/adc/code/sphere'</em>, <em>workdir='/scratch'</em><big>)</big><a class="headerlink" href="#sphere.torqueScriptSerial3" title="Permalink to this definition">¶</a></dt>
<dd><p>Create job script for the Torque queue manager for three binaries</p>
</dd></dl>

<dl class="function">
<dt id="sphere.vector_norm">
<tt class="descclassname">sphere.</tt><tt class="descname">vector_norm</tt><big>(</big><em>ndvector</em><big>)</big><a class="headerlink" href="#sphere.vector_norm" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a 1D vector of normalized values. The input array should have
one row per particle, and three rows; one per Euclidean axis.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">A value of the velocity magnutude per particle</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">numpy.array</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="sphere.video">
<tt class="descclassname">sphere.</tt><tt class="descname">video</tt><big>(</big><em>project</em>, <em>out_folder='./'</em>, <em>video_format='mp4'</em>, <em>graphics_folder='../img_out/'</em>, <em>graphics_format='png'</em>, <em>fps=25</em>, <em>qscale=1</em>, <em>bitrate=1800</em>, <em>verbose=False</em><big>)</big><a class="headerlink" href="#sphere.video" title="Permalink to this definition">¶</a></dt>
<dd><p>Use ffmpeg to combine images to animation. All images should be rendered     beforehand.</p>
</dd></dl>

<dl class="function">
<dt id="sphere.visualize">
<tt class="descclassname">sphere.</tt><tt class="descname">visualize</tt><big>(</big><em>project</em>, <em>method='energy'</em>, <em>savefig=True</em>, <em>outformat='png'</em><big>)</big><a class="headerlink" href="#sphere.visualize" title="Permalink to this definition">¶</a></dt>
<dd><p>Visualize output from the target project,
where the temporal progress is of interest.</p>
</dd></dl>

</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Python API</a><ul>
<li><a class="reference internal" href="#sample-usage">Sample usage</a></li>
<li><a class="reference internal" href="#module-sphere">The <tt class="docutils literal"><span class="pre">sphere</span></tt> module</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="cfd.html"
                        title="previous chapter">Fluid simulation and particle-fluid interaction</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/python_api.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="cfd.html" title="Fluid simulation and particle-fluid interaction"
             >previous</a> |</li>
        <li><a href="index.html">sphere 1.00-alpha documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2014, Anders Damsgaard.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>